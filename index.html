<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Web Components and Polymer JS</title>

    <meta name="description" content="Slide deck for 'Web Components and Polymer JS' - A FreshBooks Lunch and Learn">
    <meta name="author" content="Frazer Seymour">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/serif.css" id="theme">

    <script src="//cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.7.7/webcomponents.js"></script>

    <!-- HTML Imports -->
    <link rel="import" href="./custom-quote.html">
    <link rel="import" href="./polymer-quote.html">
    <link rel="import" href="./polymer-binding.html">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <style>
    *.backtick {
      background-color: lightgrey !important;
      font-family: monospace !important;
      font-size: 0.75em !important;
    }
  </style>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <section>
            <h1>Web Components and Polymer JS</h1>
            <h2 class="fragment">... and lunch</h2>
          </section>
          <section>
            <h1>Web Components and Polymer <span style="text-decoration:line-through">JS</span></h1>
            <h2>... and lunch</h2>
          </section>
        </section>

        <section>
          <h2>What's the hype?</h2>
          <p class="fragment">Component-Based Development using the DOM.</p>
        </section>

        <section>
          <h2>What does it look like?</h2>
          <video class="fragment"
            src="./ketchupbot.mp4" controls muted
            style="padding: 20px; background-color: red;">
          </video>
          <pre class="fragment"><code>
&lt;video
  src="ketchupbot.mp4" controls muted
  style="padding: 20px; background-color: red;"&gt;
&lt;/video&gt;
          </code></pre>
        </section>

        <section>
          <section>
            <h2>Sum of Four new W3C Standards:</h2>
            <p><a href="http://w3c.github.io/webcomponents/spec/custom/">Custom Elements</a></p>
            <p><a href="http://www.w3.org/TR/shadow-dom/">Shadow Dom</a></p>
            <p><a href="http://www.w3.org/TR/html5/scripting-1.html#the-template-element">HTML Templates</a></p>
            <p><a href="http://w3c.github.io/webcomponents/spec/imports/">HTML Imports</a></p>
          </section>

          <section>
            <h2>Custom Elements</h2>
            <div class="fragment">
              <h3>Spec TL;DR</h3>
              <ul>
                <li class="fragment">Name must be hyphenated.</li>
                <li class="fragment">Element must be defined and registered before use.</li>
                <li class="fragment">Written as either <span class="backtick">&lt;new-tag&gt;&lt;/new-tag&gt;</span> or <span class="backtick">&lt;p is="new-tag"&gt;&lt;/p&gt;</span></li>
                <li class="fragment">Callbacks can be defined on <span class="backtick">created</span>, <span class="backtick">attached</span>, <span class="backtick">detached</span>, <span class="backtick">attributeChanged</span></li>
                <li class="fragment">New <span class="backtick">Document.registerElement()</span> method, and overloads to <span class="backtick">Document.createElement()</span> with <span class="backtick">TypeExtension</span> argument.</li>
                <li class="fragment">New CSS <span class="backtick">:unresolved</span> pseudo-class for unregistered elements.</li>
              </ul>
            </div>
          </section>

          <section>
            <h2>Shadow Dom</h2>
            <div class="fragment">
              <h3>Spec TL;DR</h3>
              <ul>
                <li class="fragment">New <span class="backtick">ShadowRoot</span> object, extends <span class="backtick">DocumentFragment</span>.</li>
                <li class="fragment">Elements now have <span class="backtick">createShadowRoot()</span> method and <span class="backtick">shadowRoot</span> attribute.</li>
                <li class="fragment">New <span class="backtick">content</span> element which acts as an insertion point for content.</li>
                <li class="fragment">New <span class="backtick">shadow</span> element which acts as an insertion point for other shadow trees.
              </ul>
            </div>
          </section>

          <section>
            <h2>HTML Templates</h2>
            <div class="fragment">
              <h3>Spec TL;DR</h3>
              <ul>
                <li class="fragment">Parsed, but not rendered.</li>
              </ul>
            </div>
          </section>

          <section>
            <h2>HTML Imports</h2>
            <div class="fragment">
              <h3>Spec TL;DR</h3>
              <ul>
                <li class="fragment">New extension of <span class="backtick">&lt;link&gt;</span> tag.</li>
                <li class="fragment">May have an <span class="backtick">async</span> attribute.</li>
                <li class="fragment">Map of imports is stored in "Master Document" - the only document that is not an import.</li>
              </ul>
            </div>
            <p class="fragment">JavaScript is scoped to master document!</p>
          </section>
        </section>

        <section>
          <section>
            <h2>Putting it All Together</h2>
            <div class="fragment">
              <h3>Beginning</h3>
              <div class="quote-div" style="position: relative; width:300px;">
                <img src="http://a.fastcompany.net/multisite_files/fastcompany/imagecache/1280/poster/2014/01/3025003-poster-p-dog-2.jpg" style="width:300px; height:auto;"></img>
                <h4 style="position: absolute; padding: 1em; right: 0; bottom: 0; color: white;">Quote Text</h4>
              </div>

              <pre><code class="html">
&lt;div class="quote-div" style="..."&gt;
  &lt;img src="..." style="..."&gt;&lt;/img&gt;
  &lt;h4 style="..."&gt;Quote Text&lt;/h4&gt;
&lt;/div&gt;
              </code></pre>
            </div>
          </section>

          <section>
            <h2>Putting it All Together</h2>
            <div>
              <h3>Custom Element</h3>
              <pre><code class="html">
&lt;script&gt;
  document.registerElement("custom-quote", {
    prototype: CustomQuote,
    extends: 'div'
  });
&lt;/script&gt;
              </code></pre>
            </div>
          </section>
          
          <section>
            <h2>Putting it All Together</h2>
            <div>
              <h3>Template</h3>
              <pre><code class="html">
&lt;template id="template"&gt;
  &lt;style&gt;
    div {
      ...
    }
    h4 {
      ...
    }
  &lt;/style&gt;
  &lt;div&gt;
    &lt;img src="..."&gt;&lt;/img&gt;
    &lt;h4&gt;&lt;content&gt;&lt;/content&gt;&lt;/h4&gt;
  &lt;/div&gt;
&lt;/template&gt;
              </code></pre>
              <p></p>
            </div>
          </section>

          <section>
            <h2>Putting it All Together</h2>
            <div>
              <h3>Shadow DOM</h3>
              <pre><code class="html">
&lt;script&gt;
    var template = document.querySelector('template').content;
    var CustomQuote = Object.create(HTMLDivElement.prototype);
    CustomQuote.createdCallback = function() {
        var shadowRoot = this.createShadowRoot();
        var clone = document.importNode(template, true);
        shadowRoot.appendChild(clone);
    };
&lt;/script&gt;
              </code></pre>
            </div>
          </section>

          <section>
            <h2>Putting it All Together</h2>
            <div>
              <h3>HTML Import and Usage</h3>
              <pre><code class="html">
&lt;head&gt;
  ...
  &lt;link rel="import" href="custom-quote.html"&gt;&lt;/link&gt;
  ...
&lt;/head&gt;
&lt;body&gt;
  ...
  &lt;custom-quote&gt;My Text Here!&lt;/custom-quote&gt;
  &ltdiv is="custom-quote"&gt;Alternate syntax!&lt;/div&gt;
  ...
&lt;/body&gt;
              </code></pre>
            </div>
          </section>
        </section>

        <section>
          <h2>Working Example</h2>
          <custom-quote>“But you merely adopted the dark. I was born in it, molded by it... The shadows betray you because they belong to&nbsp;me.”&nbsp;-&nbsp;Bane</custom-quote>
        </section>

        <section>
          <section>
            <h2>Implementation</h2>
            <div class="fragment">
              <h3>Browser Support</h3>
              <img src="./browser_support.png"></img>
            </div>
          </section>

          <section>
            <h2>Implementation</h2>
            <h3>Polyfills!</h3>
            <p class="fragment"><span class="backtick">webcomponents.js</span></p>
            <div class="fragment">
              <h3>Web Components:</h3>
              <ul>
                <li>Custom Elements</li>
                <li>HTML Imports</li>
                <li>Shadow DOM</li>
              </ul>
            </div>
            <div class="fragment">
              <h3>DOM:</h3>
              <ul>
                <li>WeakMap - Shim for ES6 WeakMap type.</li>
                <li>Mutation Observers - Efficiently watch for changes in the DOM.</li>
              </ul>
            </div>
          </section>

          <section>
            <h2>Implementation</h2>
            <h3>"Evergreen Browsers"</h3>
            <a href="https://github.com/webcomponents/webcomponentsjs#browser-support"><img src="./polyfill_support.png" alt=""></a>
          </section>
        </section>

        <section>
          <h2>Questions?</h2>
        </section>

        <section>
          <h2>Polymer?</h2>
          <ul>
            <li class="fragment">Simpler syntax.</li>
            <li class="fragment">Data binding.</li>
            <li class="fragment">Animations.</li>
          </ul>
        </section>

        <section>
          <section>
            <h2>Polymer Example</h2>
            <pre><code class="html">
&lt;dom-module id="polymer-quote"&gt;
  &lt;template&gt;
    ...
  &lt;/template&gt;

  &lt;script&gt;
    Polymer({
      is: 'polymer-quote'
    });
  &lt;/script&gt;
&lt;/dom-module&gt;
            </code></pre>
          </section>

          <section>
            <h2>Polymer Example</h2>
            <polymer-quote>This one works too!</polymer-quote>
            <a href="./example.html" target="_blank" class="fragment">Seriously!</a>
          </section>
        </section>
        
        <section>
          <h2>More Polymer</h2>
          <ul>
            <li class="fragment"><span class="backtick">factoryImpl</span> function</li>
            <li class="fragment"><span class="backtick">extends</span> attribute</li>
            <li class="fragment">Lifecycle callbacks - <span class="backtick">created</span>, <span class="backtick">attached</span>, <span class="backtick">attributeChanged</span>, etc.</li>
            <li class="fragment"><span class="backtick">ready</span> callback - between <span class="backtick">created</span> and <span class="backtick">attached</span></li>
            <li class="fragment"><span class="backtick">hostAttributes</span> - array, serializes to strings</li>
            <li class="fragment"><span class="backtick">Polymer.Class()</span> - registers, but doesn't create</li>
          </ul>
        </section>

        <section>
          <h2>Data Binding</h2>
          <ul>
            <li class="fragment"><span class="backtick">&lt;element attr="{{variable}}"&gt;&lt;/element&gt;</span></li>
            <li class="fragment"><span class="backtick">&lt;element&gt;{{variable}}&lt;/element&gt;</span></li>
            <li class="fragment"><span class="backtick">&lt;element&gt;Text, then {{variable}}&lt;/element&gt;</span> - invalid!</li>
          </ul>
          <p class="fragment">Look familiar?</p>
        </section>

        <section>
          <h2>Ember!</h2>
          <iframe src="ember-example/index.html"></iframe>
        </section>
        
        <section>
          <h2>Component Library</h2>
          <p class="fragment"><a href="https://customelements.io/">Material Design</a></p>
          <p class="fragment"><a href="https://customelements.io/">CustomElements.io</a></p>
        </section>
        
        <section>
          <h2>Thank You!</h2>
        </section>

        <section style="font-size:0.75em;">
          <strong>These Slides</strong>
          <p><a href="">github.com/FrazerSeymour/web-components-lunch-and-learn</a></p>
          <strong>HTML5Rocks Tutorials</strong>
          <p><a href="">Custom Elements</a></p>
          <p><a href="">Shadow DOM</a></p>
          <p><a href="">Templates</a></p>
          <strong>Google I/O Talks</strong>
          <p><a href="">Web Components - A Tectonic Shift for Web Development (2013)</a></p>
          <p><a href="">Web Components In Action (2013)</a></p>
          <p><a href="">Polymer and the Web Components Revolution (2014)</a></p>
          <strong>EmberConf</strong>
          <p><a href="">Interaction Design with Ember 2.0 and Polymer (2015)</a></p>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
        ]
      });
    </script>
  </body>
</html>
